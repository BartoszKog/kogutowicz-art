(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();console.log("Portfolio artystyczne załadowane!");let x=[],E=[],O=[],m={};function Y(){return window.location.hostname.includes("github.io")?"/kogutowicz-art":""}function A(t){const e=Y(),n=window.location.pathname;console.log("correctImagePath:",{imagePath:t,basePath:e,currentPath:n});const o=t.startsWith("/")?t.substring(1):t;let i;return n.includes("/pages/")||n.includes("/gallery.html")||n.includes("/about.html")||n.includes("/shop.html")?e?i=`${e}/${o}`:i=`../../${o}`:e?i=`${e}/${o}`:i=`./${o}`,console.log("correctImagePath wynik:",i),i}async function _(){try{const t=Y(),e=window.location.pathname;let n=t;e.includes("/pages/")&&!t&&(n="../.."),x=await(await fetch(`${n}/src/data/json/gallery.json`)).json(),E=await(await fetch(`${n}/src/data/json/featured.json`)).json(),O=await(await fetch(`${n}/src/data/json/shop.json`)).json(),m=await(await fetch(`${n}/src/data/json/about.json`)).json(),oe()}catch(t){console.error("Błąd podczas ładowania danych:",t)}}function K(){const t=document.querySelector(".featured-artworks");t&&(t.innerHTML="",E.forEach((e,n)=>{const o=document.createElement("div");o.className="featured-artwork-item",o.setAttribute("data-artwork-index",n);const i=A(e.image);o.innerHTML=`
      <div class="featured-artwork-image">
        <img src="${i}" alt="${e.title||"Obraz"}" loading="lazy">
      </div>
      <div class="featured-artwork-info">
        <h3>${e.title||"Bez tytułu"}</h3>
        ${e.description?`<p>${e.description}</p>`:""}
      </div>
    `,o.addEventListener("click",()=>{X(n,E,"featured")}),o.addEventListener("mouseenter",()=>{o.style.transform="translateY(-4px)"}),o.addEventListener("mouseleave",()=>{o.style.transform="translateY(0)"}),t.appendChild(o)}),ce(),pe())}function C(t=x){const e=document.querySelector(".gallery-artworks");e&&(e.innerHTML="",t.forEach((n,o)=>{const i=document.createElement("div");i.className="bg-white rounded shadow-md overflow-hidden",i.setAttribute("data-artwork-index",o);const r=A(n.image);i.innerHTML=`
      <div class="h-64 bg-gray-200 flex items-center justify-center overflow-hidden">
        <img src="${r}" alt="${n.title||"Obraz"}" class="w-full h-full object-cover">
      </div>
      <div class="p-4">
        <h3 class="text-xl font-semibold mb-2">${n.title||"Bez tytułu"}</h3>
        ${n.technique||n.dimensions||n.year?`<p class="text-gray-600">${[n.technique,n.dimensions,n.year].filter(Boolean).join(", ")}</p>`:""}
        ${n.description?`<p class="text-sm mt-2">${n.description}</p>`:""}
        <p class="mt-2 ${n.available?"text-green-600":"text-gray-400"}">
          ${n.available?"Dostępny":"Niedostępny"}
        </p>
      </div>
    `,i.addEventListener("click",()=>{X(o,t,"gallery")}),e.appendChild(i)}))}function Q(){const t=document.querySelector(".shop-products");t&&(t.innerHTML="",O.forEach(e=>{const n=document.createElement("div");n.className="bg-white rounded shadow-md overflow-hidden";const o=A(e.image),i=e.available!==!1,r=i?"shop-purchase-button bg-purple-500 text-white px-6 py-3 rounded-lg hover:bg-purple-600 inline-block font-semibold transition-all duration-300 transform":"bg-gray-400 text-gray-600 px-4 py-2 rounded cursor-not-allowed inline-block",a=i?"Przejdź do zakupu":"Niedostępne",s=i?`href="${e.purchaseUrl}" target="_blank" rel="noopener noreferrer"`:'onclick="return false;"';n.innerHTML=`
      <div class="h-64 bg-gray-200 flex items-center justify-center overflow-hidden">
        <img src="${o}" alt="${e.title||"Produkt"}" class="w-full h-full object-cover">
      </div>
      <div class="p-4">
        <h3 class="text-xl font-semibold mb-2">${e.title||"Bez tytułu"}</h3>
        ${e.description?`<p class="text-gray-600">${e.description}</p>`:""}
        ${e.price?`<p class="text-purple-600 font-bold mt-2">${e.price} zł</p>`:""}        <div class="mt-4 flex items-center justify-between">
          <a ${s} class="${r}">
            ${a}
          </a>
          ${i?"":'<span class="text-gray-400 font-semibold text-sm">Sprzedane</span>'}
        </div>
      </div>
    `,t.appendChild(n)}))}function ee(t,e){if(!t)return null;const n=t.replace(/-/g," ");if(e.includes(n))return n;n.replace(/a/g,"ą").replace(/c/g,"ć").replace(/e/g,"ę").replace(/l/g,"ł").replace(/n/g,"ń").replace(/o/g,"ó").replace(/s/g,"ś").replace(/z/g,"ź");for(const o of e)if(o.replace(/ą/g,"a").replace(/ć/g,"c").replace(/ę/g,"e").replace(/ł/g,"l").replace(/ń/g,"n").replace(/ó/g,"o").replace(/ś/g,"s").replace(/ź/g,"z").replace(/ż/g,"z")===n)return o;return null}function H(t){if(!t)return x;const e=t.toLowerCase();return x.filter(n=>n.categories&&Array.isArray(n.categories)&&n.categories.some(o=>o&&o.toLowerCase()===e))}function te(){const t=document.querySelector(".category-filters");if(!t)return;t.className="category-filters loading";const e=new Map;x.forEach(c=>{c.categories&&Array.isArray(c.categories)&&c.categories.forEach(d=>{d&&d.trim()&&e.set(d,(e.get(d)||0)+1)})});const n=Array.from(e.entries()).sort((c,d)=>d[1]-c[1]).map(c=>c[0]);t.innerHTML="";const o=document.createElement("button");o.className="category-chip category-chip-active",o.textContent=`Wszystkie (${x.length})`,o.setAttribute("data-category","wszystkie"),o.addEventListener("click",()=>{C(),i(o),window.history.replaceState(null,null,window.location.pathname)}),t.appendChild(o),n.forEach(c=>{const d=e.get(c),v=document.createElement("button");v.className="category-chip category-chip-inactive",v.textContent=`${c} (${d})`,v.setAttribute("data-category",c),v.addEventListener("click",()=>{const L=H(c);C(L),i(v);const l=c.replace(/ą/g,"a").replace(/ć/g,"c").replace(/ę/g,"e").replace(/ł/g,"l").replace(/ń/g,"n").replace(/ó/g,"o").replace(/ś/g,"s").replace(/ź/g,"z").replace(/ż/g,"z").replace(/\s+/g,"-");window.history.replaceState(null,null,`${window.location.pathname}#${l}`)}),t.appendChild(v)});function i(c){t.querySelectorAll(".category-chip").forEach(d=>{d.className="category-chip category-chip-inactive"}),c.className="category-chip category-chip-active"}const r=window.location.hash.substring(1),a=ee(r,n);let s=null,h=o;if(a&&a!=="wszystkie"){const c=Array.from(t.querySelectorAll(".category-chip")).find(d=>d.getAttribute("data-category")===a);c&&(s=a,h=c)}if(s){const c=H(s);C(c)}else C();i(h),setTimeout(()=>{t.classList.remove("loading")},300)}function ne(){if(!document.querySelector(".about-artist-content"))return;const e=document.querySelector(".artist-photo"),n=document.querySelector(".artist-biography"),o=document.querySelector(".artist-education"),i=document.querySelector(".artist-achievements"),r=document.querySelector(".artist-exhibitions"),a=document.querySelector("h1");if(a&&(a.textContent=m.artistName||"O Artyście"),e&&m.artistPhoto){e.innerHTML=`
      <img src="${A(m.artistPhoto)}" alt="${m.artistName||"Artysta"}" 
           class="w-full h-full object-cover rounded">
    `,e.classList.add("has-image");const s=e.querySelector("img");s&&(s.onload=()=>{z&&z(),z=N()},s.complete&&(z&&z(),z=N()))}n&&m.biography&&Array.isArray(m.biography)&&m.biography.length>0&&(n.innerHTML="",m.biography.forEach(s=>{if(s&&s.trim()){const h=document.createElement("p");h.className="text-gray-700 mb-4";const c=s.replace(/\b([aiozwunazeprypod])\s+/gi,"$1&nbsp;");h.innerHTML=c,n.appendChild(h)}})),o&&m.education&&Array.isArray(m.education)&&m.education.length>0&&(o.innerHTML="",m.education.forEach(s=>{if(s&&s.trim()){const h=document.createElement("li");h.className="list-disc list-inside text-gray-700";const c=s.replace(/\b([aiozwunazeprypod])\s+/gi,"$1&nbsp;");h.innerHTML=c,o.appendChild(h)}})),i&&m.achievements&&Array.isArray(m.achievements)&&m.achievements.length>0&&(i.innerHTML="",m.achievements.forEach(s=>{if(s&&s.trim()){const h=document.createElement("li");h.className="list-disc list-inside text-gray-700";const c=s.replace(/\b([aiozwunazeprypod])\s+/gi,"$1&nbsp;");h.innerHTML=c,i.appendChild(h)}})),r&&m.exhibitions&&Array.isArray(m.exhibitions)&&m.exhibitions.length>0&&(r.innerHTML="",m.exhibitions.forEach(s=>{if(s&&s.trim()){const h=document.createElement("li");h.className="list-disc list-inside text-gray-700";const c=s.replace(/\b([aiozwunazeprypod])\s+/gi,"$1&nbsp;");h.innerHTML=c,r.appendChild(h)}}))}function oe(){const t=window.location.pathname;t.includes("gallery.html")?(C(),te()):t.includes("shop.html")?Q():t.includes("about.html")?ne():(K(),de())}function ie(){const t=document.getElementById("mobile-menu-button"),e=document.getElementById("mobile-menu");if(!t||!e)return;let n=!1;function o(){n=!n,n?(e.classList.remove("hidden"),t.setAttribute("aria-expanded","true"),t.setAttribute("aria-label","Zamknij menu"),t.innerHTML=`
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      `,e.focus()):(e.classList.add("hidden"),t.setAttribute("aria-expanded","false"),t.setAttribute("aria-label","Otwórz menu"),t.innerHTML=`
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      `)}t.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),o()}),t.addEventListener("keydown",r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),r.stopPropagation(),o())}),window.addEventListener("resize",()=>{window.innerWidth>=768&&n&&o()}),e.querySelectorAll("a").forEach(r=>{r.addEventListener("click",()=>{n&&o()})}),document.addEventListener("keydown",r=>{r.key==="Escape"&&n&&(o(),t.focus())}),document.addEventListener("click",r=>{n&&!e.contains(r.target)&&!t.contains(r.target)&&o()}),e.addEventListener("keydown",r=>{const a=e.querySelectorAll("a"),s=Array.from(a).indexOf(document.activeElement);if(r.key==="ArrowDown"){r.preventDefault();const h=s<a.length-1?s+1:0;a[h].focus()}else if(r.key==="ArrowUp"){r.preventDefault();const h=s>0?s-1:a.length-1;a[h].focus()}else r.key==="Home"?(r.preventDefault(),a[0].focus()):r.key==="End"&&(r.preventDefault(),a[a.length-1].focus())})}let u={isOpen:!1,currentIndex:0,artworks:[],overlay:null,source:"gallery"};function X(t,e,n="gallery"){u.currentIndex=t,u.artworks=e,u.isOpen=!0,u.source=n,document.body.classList.add("focus-mode-open"),u.overlay||re(),q(),u.overlay.classList.add("active"),ae()}function j(){u.isOpen&&(u.isOpen=!1,document.body.classList.remove("focus-mode-open"),u.overlay&&(u.overlay.classList.remove("active"),setTimeout(()=>{u.overlay&&!u.isOpen&&(u.overlay.remove(),u.overlay=null)},300)),le())}function re(){const t=document.createElement("div");t.className="focus-mode-overlay",t.innerHTML=`
    <button class="focus-close-button" aria-label="Zamknij tryb skupienia">
      <svg class="focus-close-icon" viewBox="0 0 24 24">
        <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
    
    <button class="focus-nav-button prev" aria-label="Poprzedni obraz">
      <svg class="focus-nav-icon" viewBox="0 0 24 24">
        <path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
    
    <button class="focus-nav-button next" aria-label="Następny obraz">
      <svg class="focus-nav-icon" viewBox="0 0 24 24">
        <path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
    
    <div class="focus-mode-container">
      <img class="focus-mode-image" src="" alt="" />
      
      <div class="focus-mode-info">
        <h3 class="text-2xl font-bold mb-2"></h3>
        <div class="focus-mode-details"></div>
        <p class="focus-mode-description mt-3 text-gray-700"></p>
        <p class="focus-mode-availability mt-2"></p>
      </div>
    </div>
  `,document.body.appendChild(t),u.overlay=t;const e=t.querySelector(".focus-close-button"),n=t.querySelector(".focus-nav-button.prev"),o=t.querySelector(".focus-nav-button.next");e.addEventListener("click",j),n.addEventListener("click",()=>$("prev")),o.addEventListener("click",()=>$("next")),t.addEventListener("click",i=>{i.target===t&&j()})}function q(){if(!u.overlay)return;const t=u.artworks[u.currentIndex];if(!t)return;const e=u.overlay.querySelector(".focus-mode-image"),n=u.overlay.querySelector(".focus-mode-info h3"),o=u.overlay.querySelector(".focus-mode-details"),i=u.overlay.querySelector(".focus-mode-description"),r=u.overlay.querySelector(".focus-mode-availability");e.classList.add("loading");const a=A(t.image);e.src=a,e.alt=t.title||"Obraz",e.onload=()=>{e.classList.remove("loading")},n.textContent=t.title||"Bez tytułu";const s=[];t.technique&&s.push(t.technique),t.dimensions&&s.push(t.dimensions),t.year&&s.push(t.year),o.innerHTML=s.length>0?`<p class="text-gray-500">${s.join(" • ")}</p>`:"",i.textContent=t.description||"",i.style.display=t.description?"block":"none",u.source==="gallery"?r.innerHTML=`
      <span class="${t.available?"text-green-600":"text-gray-400"} font-semibold">
        ${t.available?"Dostępny":"Niedostępny"}
      </span>
    `:r.innerHTML="",se()}function $(t){const e=u.artworks.length;t==="next"?u.currentIndex=(u.currentIndex+1)%e:t==="prev"&&(u.currentIndex=(u.currentIndex-1+e)%e),q()}function se(){if(!u.overlay)return;const t=u.overlay.querySelector(".focus-nav-button.prev"),e=u.overlay.querySelector(".focus-nav-button.next"),n=u.artworks.length>1;t.style.display=n?"flex":"none",e.style.display=n?"flex":"none"}let T,B;function ae(){T=t=>{if(u.isOpen)switch(t.key){case"Escape":t.preventDefault(),j();break;case"ArrowLeft":t.preventDefault(),$("prev");break;case"ArrowRight":t.preventDefault(),$("next");break}},B=()=>{u.isOpen&&q()},document.addEventListener("keydown",T),window.addEventListener("resize",B)}function le(){T&&document.removeEventListener("keydown",T),B&&window.removeEventListener("resize",B)}function ce(){const t={deadZone:{small:.08,medium:.12,large:.15},maxSpeed:{small:120,medium:130,large:140},minSpeed:300,edgeBoost:100,edgeThreshold:.8,accelerationCurve:1,animationInterval:12,wheelSensitivity:{small:95,medium:85,large:75},keyboardJump:{small:200,medium:250,large:300}},e=document.querySelector(".featured-artworks.horizontal-scroll"),n=document.querySelector(".featured-artworks-container");if(!e||!n)return;let o,i=null;const r=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0;if(!r()){const l=()=>window.innerWidth>=2200;let p=!1;n.addEventListener("mouseenter",()=>{l()||(p=!0)}),n.addEventListener("mouseleave",()=>{p=!1,i&&(clearInterval(i),i=null)}),n.addEventListener("mousemove",f=>{if(!p||l())return;const y=n.getBoundingClientRect(),w=f.clientX-y.left,g=y.width,S=g/2,k=(w-S)/S;let b;if(g<600?b=t.deadZone.small:g<900?b=t.deadZone.medium:b=t.deadZone.large,Math.abs(k)<b){i&&(clearInterval(i),i=null);return}const P=(Math.abs(k)-b)/(1-b),R=Math.pow(P,t.accelerationCurve),F=Math.abs(k)>t.edgeThreshold?t.edgeBoost:1;let M;g<600?M=t.maxSpeed.small:g<900?M=t.maxSpeed.medium:M=t.maxSpeed.large;const V=M*F,W=t.minSpeed,Z=W+(V-W)*R,D=k>0?1:-1;i&&clearInterval(i),i=setInterval(()=>{if(!p){clearInterval(i),i=null;return}const G=Z*D;e.scrollLeft+=G;const J=e.scrollLeft<=0,U=e.scrollLeft>=e.scrollWidth-e.clientWidth;(D<0&&J||D>0&&U)&&(clearInterval(i),i=null)},t.animationInterval)})}e.addEventListener("wheel",l=>{if(window.innerWidth>=2200)return;const p=e.scrollLeft===0,f=e.scrollLeft>=e.scrollWidth-e.clientWidth;if(Math.abs(l.deltaX)>Math.abs(l.deltaY)||!p&&!f){l.preventDefault();const y=e.getBoundingClientRect().width;let w;y<600?w=t.wheelSensitivity.small:y<900?w=t.wheelSensitivity.medium:w=t.wheelSensitivity.large;const g=l.deltaY*w;e.scrollLeft+=g,clearTimeout(o),o=setTimeout(()=>{},150)}},{passive:!1});let a=0,s=0,h=!1,c=0,d=0;e.addEventListener("touchstart",l=>{window.innerWidth>=2200||(a=l.touches[0].clientX,s=l.touches[0].clientY,c=Date.now(),h=!1,d=e.scrollLeft,i&&(clearInterval(i),i=null))},{passive:!0}),e.addEventListener("touchmove",l=>{if(window.innerWidth>=2200||!a||!s)return;const p=l.touches[0].clientX,f=l.touches[0].clientY,y=p-a,w=f-s,g=Math.abs(y),S=Math.abs(w);if(!h&&(g>15||S>15)&&g>S&&g>15&&(h=!0,l.cancelable&&l.preventDefault()),h&&l.cancelable){l.preventDefault();const k=d-y;e.scrollLeft=Math.max(0,Math.min(k,e.scrollWidth-e.clientWidth))}},{passive:!1}),e.addEventListener("touchend",l=>{if(window.innerWidth>=2200)return;if(!a||!s||!h){a=0,s=0,h=!1;return}const p=l.changedTouches[0].clientX,f=Date.now(),y=a-p,w=f-c,g=Math.abs(y),S=g/w;if(S>.5&&g>30&&w<300){const k=Math.min(S*100,300),b=y>0?1:-1,P=e.scrollLeft+k*b;e.scrollTo({left:Math.max(0,Math.min(P,e.scrollWidth-e.clientWidth)),behavior:"smooth"})}a=0,s=0,h=!1,c=0,d=0},{passive:!0}),e.addEventListener("keydown",l=>{if(window.innerWidth>=2200)return;const p=e.getBoundingClientRect().width;let f;p<600?f=t.keyboardJump.small:p<900?f=t.keyboardJump.medium:f=t.keyboardJump.large,l.key==="ArrowLeft"?(l.preventDefault(),e.scrollLeft-=f):l.key==="ArrowRight"&&(l.preventDefault(),e.scrollLeft+=f)}),window.innerWidth<1600&&e.setAttribute("tabindex","0");function v(){const l=document.querySelector(".desktop-scroll-hint"),p=document.querySelector(".featured-artworks-container"),f=document.querySelector(".featured-artworks.horizontal-scroll");if(!l||!p||!f||r())return;let y=!1;function w(){const b=f.clientWidth;return f.scrollWidth>b}function g(){w()?(l.style.display="block",y||setTimeout(()=>{!y&&w()&&l.classList.add("visible")},2e3)):l.style.display="none"}g(),window.addEventListener("resize",()=>{setTimeout(g,100)}),f.querySelectorAll("img").forEach(b=>{b.complete?g():b.addEventListener("load",g)});const k=()=>{y=!0,l.classList.remove("visible"),setTimeout(()=>{l.style.display="none"},500)};p.addEventListener("mouseenter",k,{once:!0}),f.addEventListener("wheel",k,{once:!0})}v();const L=()=>{window.innerWidth>=1600?(i&&(clearInterval(i),i=null),e.removeAttribute("tabindex")):e.setAttribute("tabindex","0")};window.addEventListener("resize",L),L(),fe()}function de(){const t=document.querySelector(".featured-artworks-container");if(!t)return;let e=!1;new IntersectionObserver(o=>{o.forEach(i=>{e=i.isIntersecting})},{threshold:.3,rootMargin:"0px"}).observe(t),window.addEventListener("wheel",o=>{if(!e)return;const i=document.querySelector(".featured-artworks.horizontal-scroll");if(!i)return;const r=i.scrollLeft===0,a=i.scrollLeft>=i.scrollWidth-i.clientWidth;o.deltaY>0&&r||o.deltaY<0&&a||Math.abs(o.deltaX)>Math.abs(o.deltaY)*.5&&(o.preventDefault(),i.scrollLeft+=o.deltaY)},{passive:!1})}function ue(){const t=document.querySelector(".featured-artworks");if(!t)return;new IntersectionObserver(n=>{n.forEach(o=>{o.isIntersecting&&o.target.classList.add("visible")})},{threshold:.1,rootMargin:"0px 0px -100px 0px"}).observe(t)}document.addEventListener("DOMContentLoaded",()=>{console.log("DOMContentLoaded - inicjalizacja rozpoczęta"),_(),ie();const t=window.location.pathname,e=t==="/"||t.endsWith("/index.html")||t===""||t.includes("kogutowicz-art")&&!t.includes("/pages/");console.log("Ścieżka:",t,"Czy strona główna:",e),e?(console.log("Inicjalizuję hero slider..."),I=new he,ue()):console.log("Nie jestem na stronie głównej, pomijam slider")});window.addEventListener("beforeunload",()=>{z&&(z(),z=null),I&&(I.destroy(),I=null)});function N(){const t=document.querySelector(".artist-photo");if(!t)return;const e=t.querySelector("img");if(!e)return;const n=3,o=1e3;function i(a){const s=t.getBoundingClientRect();s.left+s.width/2,s.top+s.height/2;const h=a.clientX,c=a.clientY,d=window.innerWidth/2,v=window.innerHeight/2,L=(h-d)/d,l=(c-v)/v,p=L*n,f=-l*n;e&&(e.style.transform=`
        perspective(${o}px)
        rotateX(${f}deg)
        rotateY(${p}deg)
        scale3d(1.02, 1.02, 1.02)
      `),t.classList.add("active")}function r(){e&&(e.style.transform=`
        perspective(${o}px)
        rotateX(0deg)
        rotateY(0deg)
        scale3d(1, 1, 1)
      `),t.classList.remove("active")}return document.addEventListener("mousemove",i),document.addEventListener("mouseleave",r),document.addEventListener("touchstart",r),document.addEventListener("touchend",r),function(){document.removeEventListener("mousemove",i),document.removeEventListener("mouseleave",r),document.removeEventListener("touchstart",r),document.removeEventListener("touchend",r),r()}}let z=null;class he{constructor(){this.currentSlide=0,this.slides=[],this.slideImages=[],this.autoPlayInterval=null,this.autoPlayDelay=8e3,this.container=document.getElementById("slider-container"),this.dotsContainer=document.getElementById("slider-dots"),this.prevButton=document.getElementById("prev-slide"),this.nextButton=document.getElementById("next-slide"),this.overlayContent=document.querySelector("#hero-slider .text-center"),console.log("HeroSlider konstruktor:",{container:this.container,overlayContent:this.overlayContent,dotsContainer:this.dotsContainer}),this.featuredData=[],this.init()}async init(){if(console.log("HeroSlider.init() rozpoczęty"),!this.container){console.error("Brak kontenera slidera!");return}this.showLoader();try{console.log("Czekam na dane featured..."),await this.waitForFeaturedData(),console.log("Dane featured załadowane:",this.featuredData),console.log("Rozpoczynam preload obrazów..."),await this.preloadImages(),console.log("Obrazy preloadowane"),this.hideLoader(),console.log("Tworzę slides..."),this.createSlides(),console.log("Tworzę dots..."),this.createDots(),console.log("Dodaję event listenery..."),this.addEventListeners(),console.log("Pokazuję pierwszy slide..."),this.showSlide(0),console.log("Rozpoczynam autoplay..."),this.startAutoPlay(),console.log("HeroSlider inicjalizacja zakończona pomyślnie")}catch(e){console.error("Błąd podczas inicjalizacji slidera:",e),this.hideLoader()}}async waitForFeaturedData(){console.log("Czekam na featuredArtworks...",E);let e=0;const n=50;for(;(!E||E.length===0)&&e<n;)await new Promise(o=>setTimeout(o,100)),e++,e%10===0&&console.log(`Próba ${e}/50 - featuredArtworks:`,E);if(!E||E.length===0)throw new Error("Nie udało się załadować danych featured po 5 sekundach");this.featuredData=E,console.log("Dane featured załadowane pomyślnie:",this.featuredData)}showLoader(){this.container&&(this.container.innerHTML=`
        <div class="slider-image-preloader">
          <div class="spinner"></div>
        </div>
      `)}hideLoader(){var n;const e=(n=this.container)==null?void 0:n.querySelector(".slider-image-preloader");e&&e.remove()}async preloadImages(){console.log("Rozpoczynam ładowanie obrazów featured:",this.featuredData);const e=this.featuredData.map(o=>new Promise((i,r)=>{const a=new Image;a.onload=()=>{console.log(`Załadowano obraz: ${o.title} - ${a.src}`),i({img:a,artwork:o})},a.onerror=()=>{console.error(`Błąd ładowania obrazu: ${o.image}`),r(new Error(`Nie można załadować obrazu: ${o.image}`))};const s=A(o.image);console.log(`Próba załadowania: ${o.image} -> ${s}`),a.src=s})),n=await Promise.all(e);this.slideImages=n,console.log("Wszystkie obrazy załadowane:",this.slideImages)}createSlides(){console.log("createSlides rozpoczęte, container:",this.container),this.slideImages.forEach(({img:e,artwork:n},o)=>{const i=document.createElement("img");i.className="slider-image",i.src=e.src,i.alt=n.title,i.loading="eager",i.style.objectFit="cover",i.style.width="100%",i.style.height="100%",this.container.appendChild(i),this.slides.push({element:i,artwork:n})}),console.log("createSlides zakończone. Liczba slajdów:",this.slides.length)}createDots(){this.dotsContainer&&(this.dotsContainer.innerHTML="",this.slides.forEach((e,n)=>{const o=document.createElement("button");o.className="slider-dot",o.setAttribute("aria-label",`Przejdź do slajdu ${n+1}`),o.addEventListener("click",()=>this.goToSlide(n)),this.dotsContainer.appendChild(o)}))}addEventListeners(){console.log("Dodaję event listenery dla slidera..."),console.log("Elementy slidera:",{container:!!this.container,prevButton:!!this.prevButton,nextButton:!!this.nextButton,dotsContainer:!!this.dotsContainer}),this.prevButton?this.prevButton.addEventListener("click",()=>this.prevSlide()):console.warn("Brak przycisku prev!"),this.nextButton?this.nextButton.addEventListener("click",()=>this.nextSlide()):console.warn("Brak przycisku next!"),document.addEventListener("keydown",e=>{e.key==="ArrowLeft"?this.prevSlide():e.key==="ArrowRight"&&this.nextSlide()}),this.container&&(this.container.addEventListener("mouseenter",()=>this.pauseAutoPlay()),this.container.addEventListener("mouseleave",()=>this.startAutoPlay())),this.addPointerSupport(),console.log("Event listenery zostały dodane")}addPointerSupport(){if(!this.container||!("PointerEvent"in window)){console.log("Pointer events nie są dostępne lub brak kontenera");return}console.log("Dodaję pointer events jako dodatkowe wsparcie dla gestów");let e=0,n=0,o=!1,i=0,r=!1;const a=50,s=800,h=150,c=30;this.container.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(console.log("🎯 PointerDown (touch) event otrzymany!",d),e=d.clientX,n=d.clientY,i=Date.now(),o=!0,r=!1,this.pauseAutoPlay(),this.container.setPointerCapture(d.pointerId),console.log("Pointer start:",{startX:e,startY:n,timestamp:i}))},{passive:!0}),this.container.addEventListener("pointermove",d=>{if(!o||d.pointerType!=="touch")return;const v=d.clientX,L=d.clientY,l=Math.abs(v-e),p=Math.abs(L-n);if(console.log("Pointer move:",{currentX:v,currentY:L,deltaX:l,deltaY:p}),l>c||p>c)if(l>p)r||(r=!0,console.log("Wykryto poziomy swipe (pointer) - blokuję scrollowanie")),d.preventDefault();else{console.log("Wykryto pionowy scroll (pointer) - anuluj swipe"),o=!1,this.startAutoPlay();return}},{passive:!1}),this.container.addEventListener("pointerup",d=>{if(!o||d.pointerType!=="touch")return;console.log("🎯 PointerUp (touch) event otrzymany!",d);const v=d.clientX,L=d.clientY,l=Date.now(),p=e-v,f=Math.abs(n-L),y=l-i,w=Math.abs(p);if(console.log("Pointer end details:",{startX:e,endX:v,deltaX:p,deltaY:f,swipeTime:y,swipeDistance:w,isHorizontalSwipe:r}),r&&w>=a&&y<=s&&f<=h){const S=p>0?"left (next)":"right (prev)";console.log("✅ Valid pointer swipe detected:",S),p>0?this.nextSlide():this.prevSlide(),setTimeout(()=>{this.startAutoPlay()},500)}else console.log("❌ Invalid pointer swipe"),this.startAutoPlay();o=!1,r=!1},{passive:!0}),this.container.addEventListener("pointercancel",d=>{o&&d.pointerType==="touch"&&(console.log("Pointer cancelled"),o=!1,r=!1,this.startAutoPlay())},{passive:!0}),console.log("Pointer support został dodany")}showSlide(e){e<0||e>=this.slides.length||(console.log(`Pokazuję slide ${e}/${this.slides.length-1}`),this.slides.forEach((n,o)=>{n.element.classList.remove("active")}),this.slides[e].element.classList.add("active"),this.updateOverlayContent(e),this.updateDots(e),this.currentSlide=e)}updateOverlayContent(e){if(!this.overlayContent)return;const n=this.slides[e].artwork,o=this.getCategorySlug(n.title);this.overlayContent.innerHTML=`
      <h1 class="text-5xl md:text-7xl font-bold mb-6 opacity-0 animate-fade-in">${n.title}</h1>
      <p class="text-xl md:text-2xl mb-8 opacity-0 animate-fade-in-delay">
        ${n.description}
      </p>
      <div class="opacity-0 animate-fade-in-delay-2">
        <a href="./src/pages/gallery.html#${o}" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-8 rounded-lg transition-all duration-300 transform hover:scale-105">
          Zobacz w Galerii
        </a>
      </div>
    `}getCategorySlug(e){return({"Pejzaż lokalny":"pejzaż lokalny",Człowiek:"postacie","Martwa natura":"martwa natura","Botaniczne opowieści":"kwiaty"}[e]||"wszystkie").replace(/ą/g,"a").replace(/ć/g,"c").replace(/ę/g,"e").replace(/ł/g,"l").replace(/ń/g,"n").replace(/ó/g,"o").replace(/ś/g,"s").replace(/ź/g,"z").replace(/ż/g,"z").replace(/\s+/g,"-")}updateDots(e){if(!this.dotsContainer)return;this.dotsContainer.querySelectorAll(".slider-dot").forEach((o,i)=>{o.classList.toggle("active",i===e)})}nextSlide(){const e=(this.currentSlide+1)%this.slides.length;this.goToSlide(e)}prevSlide(){const e=this.currentSlide===0?this.slides.length-1:this.currentSlide-1;this.goToSlide(e)}goToSlide(e){this.showSlide(e),this.restartAutoPlay()}startAutoPlay(){this.pauseAutoPlay(),this.autoPlayInterval=setInterval(()=>{this.nextSlide()},this.autoPlayDelay)}pauseAutoPlay(){this.autoPlayInterval&&(clearInterval(this.autoPlayInterval),this.autoPlayInterval=null)}restartAutoPlay(){this.pauseAutoPlay(),this.startAutoPlay()}destroy(){this.pauseAutoPlay()}}function pe(){const t=document.querySelector(".featured-artworks.horizontal-scroll");if(!t)return;function e(){const o=t.clientWidth;t.scrollWidth>o?t.style.justifyContent="flex-start":t.style.justifyContent="center"}e(),window.addEventListener("resize",()=>{setTimeout(e,100)}),t.querySelectorAll("img").forEach(o=>{o.complete?e():o.addEventListener("load",e)})}let I=null;function fe(){const t=document.querySelector(".featured-artworks.horizontal-scroll");if(!t)return;let e;window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>{typeof autoScrollInterval<"u"&&autoScrollInterval&&(clearInterval(autoScrollInterval),autoScrollInterval=null),t.getBoundingClientRect().width},250)})}
